<!DOCTYPE html>
<html>
<head>
<script>

function startTime() {
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    m = checkTime(m);
    s = checkTime(s);
    var t = setTimeout(startTime, 500);

    //split colors of rainbow across seconds in the day
    var size    = 86400;
    var k = (h * 60 * 60  + m * 60 + s);

    var red   = sin_to_hex(k, 0 * Math.PI * 2/3, size); // 0   deg
    var blue  = sin_to_hex(k, 1 * Math.PI * 2/3, size); // 120 deg
    var green = sin_to_hex(k, 2 * Math.PI * 2/3, size); // 240 deg

  //TODO Remove
  //     document.getElementById('txt').innerHTML =
  //  h + ":" + m + ":" + s + "          " + k + "  red: " + red + "  green: " + green + " Blue: " + blue;

  if ( s > 10) { //this is the result of some sort of very wacky bug that does not make sense right now
      document.body.style.backgroundColor = "#"+ red + green + blue;
  }

}

//http://www.nikolay.rocks/2015-10-29-rainbows-generator-in-javascript
function sin_to_hex(l, phase, size) {
  var sin = Math.sin(Math.PI / size * 2 * l + phase);
  var int = Math.floor(sin * 127) + 128;
  var hex = int.toString(16);

  return hex.length === 1 ? "0"+hex : hex;
}

function checkTime(i) {
    if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
    return i;
}
</script>
</head>

<body onload="startTime();">

<div id="txt"></div>

</body>
</html>
</html>

